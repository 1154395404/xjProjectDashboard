(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24f4ebf8"],{"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),a=n("da84"),i=n("c65b"),s=n("e330"),c=n("1626"),o=n("861d"),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=a.Error,d=s(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!c(t))return d(this,e);var n=i(t,this,e);if(null!==n&&!o(n))throw new l("RegExp exec method returned something other than an Object or null");return!!n}})},"0b7f":function(e,t,n){"use strict";n("83aa")},"107c":function(e,t,n){var r=n("d039"),a=n("da84"),i=a.RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},2532:function(e,t,n){"use strict";var r=n("23e7"),a=n("e330"),i=n("5a34"),s=n("1d80"),c=n("577e"),o=n("ab13"),u=a("".indexOf);r({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~u(c(s(this)),c(i(e)),arguments.length>1?arguments[1]:void 0)}})},2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0"),n("ac1f"),n("00b4");function s(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}n("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return a(e)||i(e)||s(e)||c()}},"44e7":function(e,t,n){var r=n("861d"),a=n("c6b6"),i=n("b622"),s=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==a(e))}},"4df4":function(e,t,n){"use strict";var r=n("da84"),a=n("0366"),i=n("c65b"),s=n("7b0b"),c=n("9bdd"),o=n("e95a"),u=n("68ee"),l=n("07fa"),d=n("8418"),f=n("9a1f"),h=n("35a1"),p=r.Array;e.exports=function(e){var t=s(e),n=u(this),r=arguments.length,b=r>1?arguments[1]:void 0,v=void 0!==b;v&&(b=a(b,r>2?arguments[2]:void 0));var m,x,g,y,w,C,O=h(t),_=0;if(!O||this==p&&o(O))for(m=l(t),x=n?new this(m):p(m);m>_;_++)C=v?b(t[_],_):t[_],d(x,_,C);else for(y=f(t,O),w=y.next,x=n?new this:[];!(g=i(w,y)).done;_++)C=v?c(y,b,[g.value,_],!0):g.value,d(x,_,C);return x.length=_,x}},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"5a34":function(e,t,n){var r=n("da84"),a=n("44e7"),i=r.TypeError;e.exports=function(e){if(a(e))throw i("The method doesn't accept regular expressions");return e}},"5d34":function(e,t,n){"use strict";n("e9a6")},"7abe":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{staticClass:"nav-bar",scopedSlots:e._u([{key:"title",fn:function(){return[n("van-button",{staticClass:"search-btn",attrs:{round:"",to:"/search"},scopedSlots:e._u([{key:"icon",fn:function(){return[n("div",{staticClass:"f-r"},[n("i",{staticClass:"iconfont icon-sousuo"}),n("span",{staticClass:"m-l-10"},[e._v("搜索")])])]},proxy:!0}])})]},proxy:!0}])}),n("div",{staticClass:"hamburger-btn f-r",on:{click:function(t){e.popupShow=!0}}},[n("i",{staticClass:"iconfont icon-gengduo"})]),n("div",{staticClass:"tabs-category-wrap"},[n("van-tabs",{staticClass:"tabs-category",attrs:{animated:"",swipeable:"","title-active-color":"#333333","title-inactive-color":"#777777",border:""},scopedSlots:e._u([{key:"nav-right",fn:function(){return[n("div",{staticClass:"occupy-space"})]},proxy:!0}]),model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.channels,(function(e,t){return n("van-tab",{key:e.id,attrs:{title:e.name}},[n("NewScrolls",{attrs:{newsInfo:e}})],1)})),1)],1),n("van-popup",{style:{height:"90%"},attrs:{closeable:"","close-icon-position":"top-left",round:"",position:"bottom"},model:{value:e.popupShow,callback:function(t){e.popupShow=t},expression:"popupShow"}},[n("EditChannel",{attrs:{userChannels:e.channels}})],1)],1)},a=[],i=n("c7eb"),s=n("1da1"),c=(n("a434"),n("b775")),o=function(){return Object(c["a"])({method:"get",url:"/v1_0/user/channels"})},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NewScrolls-container"},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{load:e.onLoad,"update:error":function(t){e.error=t}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(e){return n("router-link",{key:e.art_id,attrs:{to:{name:"article",params:{articleID:e.art_id}}}},[n("NewsItem",{attrs:{article:e}})],1)})),1)],1)],1)},l=[],d=n("2909"),f=function(e){return Object(c["a"])({method:"get",url:"/v1_0/articles",params:e})},h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"NewsItem-container"},[n("div",{staticClass:"oneLine f-r j-b a-s"},[n("p",[e._v(e._s(e.article.title))]),1===e.article.cover.type?n("van-image",{attrs:{src:e.article.cover.images[0]}}):e._e()],1),3===e.article.cover.type?n("div",{staticClass:"three-img f-r j-b"},e._l(e.article.cover.images,(function(e){return n("van-image",{attrs:{src:e}})})),1):e._e(),n("div",{staticClass:"bottom"},[n("span",[e._v(e._s(e.article.aut_name))]),n("span",[e._v(e._s(e.article.comm_count)+"评论")]),n("span",[e._v(e._s(e._f("relevantTime")(e.article.pubdate)))])])])},p=[],b={name:"NewsItem",components:{},props:["article"],data:function(){return{}},methods:{},computed:{},watch:{},created:function(){},mounted:function(){}},v=b,m=(n("5d34"),n("2877")),x=Object(m["a"])(v,h,p,!1,null,"32aa3a00",null),g=x.exports,y={name:"NewScrolls",components:{NewsItem:g},props:["newsInfo"],data:function(){return{requestParams:{channel_id:this.newsInfo.id,timestamp:Date.now()},list:[],loading:!1,finished:!1,refreshing:!1,error:!1}},methods:{onLoad:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var n,r,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e.requestParams);case 3:n=t.sent,r=n.data.data,e.refreshing?(e.refreshing=!1,e.list=r.results):(a=e.list).push.apply(a,Object(d["a"])(r.results)),e.requestParams.timestamp=r.pre_timestamp,e.loading=!1,e.requestParams.timestamp||(e.finished=!0),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.error=!0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.requestParams.timestamp=Date.now(),this.onLoad()}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){}},w=y,C=(n("ce9e"),Object(m["a"])(w,u,l,!1,null,"4842ea21",null)),O=C.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"EditChannel-container"},[n("van-cell",{attrs:{title:"我的频道"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-button",{staticClass:"edit-btn",attrs:{round:"",size:"mini"},on:{click:function(t){e.isEnableEdit=!e.isEnableEdit}}},[e._v(" "+e._s(e.isEnableEdit?"完成":"编辑")+" ")])]},proxy:!0}])}),n("van-grid",{attrs:{clickable:""}},e._l(e.userChannels,(function(t,r){return n("van-grid-item",{staticClass:"animate__animated  animate__infinite ",class:{animate__tada:e.isEnableEdit&&!e.fixedIndexArr.includes(r)},attrs:{text:t.name},on:{click:function(n){e.isEnableEdit?e.removeChannel(r,t):e.goThisChannel(r)}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isEnableEdit&&!e.fixedIndexArr.includes(r),expression:"isEnableEdit&&!fixedIndexArr.includes(index)"}],attrs:{name:"clear",color:"#777"}})]},proxy:!0}],null,!0)})})),1),n("div",{staticClass:"m-t-30"}),n("van-cell",{attrs:{title:"频道推荐"}}),n("van-grid",{attrs:{clickable:""}},e._l(e.recommendChannels,(function(t){return n("van-grid-item",{attrs:{text:"+ "+t.name},on:{click:function(n){return e.addUserChannels(t)}}})})),1)],1)},j=[],E=n("5530"),k=(n("caad"),n("2532"),n("4de4"),n("d3b7"),n("c740"),function(){return Object(c["a"])({method:"get",url:"/v1_0/channels"})}),I=function(e){return Object(c["a"])({method:"PATCH",url:"/v1_0/user/channels",data:e})},S=function(e){return Object(c["a"])({method:"DELETE",url:"/v1_0/user/channels/"+e})},A=n("2f62"),T={name:"EditChannel",components:{},props:["userChannels"],data:function(){return{isEnableEdit:!1,allChannels:[],fixedIndexArr:[0]}},methods:{removeChannel:function(e,t){var n=this;return Object(s["a"])(Object(i["a"])().mark((function r(){var a;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n.fixedIndexArr.includes(e)){r.next=2;break}return r.abrupt("return");case 2:if(!n.userToken){r.next=10;break}return r.next=5,S(t.id);case 5:a=r.sent,a.data,n.$bus.$emit("deleteMyChannel",e),r.next=10;break;case 10:case"end":return r.stop()}}),r)})))()},goThisChannel:function(e){this.$bus.$emit("getThisChannel",e)},addUserChannels:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var r,a,s;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.userToken){n.next=16;break}return n.prev=1,n.next=4,I({channels:[{id:e.id,seq:t.userChannels.length+1}]});case 4:r=n.sent,a=r.data,t.$bus.$emit("receiveUserChannel",e),console.log(a),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),s=n.t0.response.data.message,t.$toast(s);case 14:n.next=16;break;case 16:case"end":return n.stop()}}),n,null,[[1,10]])})))()},loadAllChannels:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k();case 3:n=t.sent,r=n.data.data.channels,e.allChannels=r,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$toast("获取全部频道信息失败");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},computed:Object(E["a"])({recommendChannels:function(){var e=this;return this.allChannels.filter((function(t){return-1===e.userChannels.findIndex((function(e){return e.id===t.id}))}))}},Object(A["b"])(["userToken"])),watch:{},created:function(){this.loadAllChannels()},mounted:function(){}},$=T,P=(n("0b7f"),Object(m["a"])($,_,j,!1,null,"3aa9b1ba",null)),R=P.exports,D={name:"Home",components:{NewScrolls:O,EditChannel:R},props:[],data:function(){return{channels:[],popupShow:!1,activeTab:0}},methods:{loadChannels:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o();case 3:n=t.sent,r=n.data.data.channels,e.channels=r,t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},computed:{},watch:{},created:function(){var e=this;this.loadChannels(),this.$bus.$on("receiveUserChannel",(function(t){e.channels.push(t)})),this.$bus.$on("getThisChannel",(function(t){e.activeTab=t,e.popupShow=!1})),this.$bus.$on("deleteMyChannel",(function(t){e.channels.splice(t,1)}))},mounted:function(){},beforeDestroy:function(){this.$bus.$off(["receiveUserChannel","getThisChannel","deleteMyChannel"])}},N=D,U=(n("df3f"),Object(m["a"])(N,r,a,!1,null,"2a363123",null));t["default"]=U.exports},"83aa":function(e,t,n){},9263:function(e,t,n){"use strict";var r=n("c65b"),a=n("e330"),i=n("577e"),s=n("ad6d"),c=n("9f7f"),o=n("5692"),u=n("7c73"),l=n("69f3").get,d=n("fce3"),f=n("107c"),h=o("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,b=p,v=a("".charAt),m=a("".indexOf),x=a("".replace),g=a("".slice),y=function(){var e=/a/,t=/b*/g;return r(p,e,"a"),r(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),w=c.BROKEN_CARET,C=void 0!==/()??/.exec("")[1],O=y||C||w||d||f;O&&(b=function(e){var t,n,a,c,o,d,f,O=this,_=l(O),j=i(e),E=_.raw;if(E)return E.lastIndex=O.lastIndex,t=r(b,E,j),O.lastIndex=E.lastIndex,t;var k=_.groups,I=w&&O.sticky,S=r(s,O),A=O.source,T=0,$=j;if(I&&(S=x(S,"y",""),-1===m(S,"g")&&(S+="g"),$=g(j,O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&"\n"!==v(j,O.lastIndex-1))&&(A="(?: "+A+")",$=" "+$,T++),n=new RegExp("^(?:"+A+")",S)),C&&(n=new RegExp("^"+A+"$(?!\\s)",S)),y&&(a=O.lastIndex),c=r(p,I?n:O,$),I?c?(c.input=g(c.input,T),c[0]=g(c[0],T),c.index=O.lastIndex,O.lastIndex+=c[0].length):O.lastIndex=0:y&&c&&(O.lastIndex=O.global?c.index+c[0].length:a),C&&c&&c.length>1&&r(h,c[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(c[o]=void 0)})),c&&k)for(c.groups=d=u(null),o=0;o<k.length;o++)f=k[o],d[f[0]]=c[f[1]];return c}),e.exports=b},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){a(e,"throw",s)}}},"9f7f":function(e,t,n){var r=n("d039"),a=n("da84"),i=a.RegExp,s=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),c=s||r((function(){return!i("a","y").sticky})),o=s||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:o,MISSED_STICKY:c,UNSUPPORTED_Y:s}},a4be:function(e,t,n){},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),s=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:s},{from:a})},ab13:function(e,t,n){var r=n("b622"),a=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),s=n("d039"),c=s((function(){i(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(e){return i(a(e))}})},caad:function(e,t,n){"use strict";var r=n("23e7"),a=n("4d64").includes,i=n("d039"),s=n("44d2"),c=i((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:c},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},ce7b:function(e,t,n){},ce9e:function(e,t,n){"use strict";n("a4be")},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),s=n("fc6a"),c=n("06cf"),o=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=s(e),a=c.f,u=i(r),l={},d=0;while(u.length>d)n=a(r,t=u[d++]),void 0!==n&&o(l,t,n);return l}})},df3f:function(e,t,n){"use strict";n("ce7b")},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),s=n("06cf").f,c=n("83ab"),o=a((function(){s(1)})),u=!c||o;r({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},e9a6:function(e,t,n){},fce3:function(e,t,n){var r=n("d039"),a=n("da84"),i=a.RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-24f4ebf8.3c8d9a1f.js.map