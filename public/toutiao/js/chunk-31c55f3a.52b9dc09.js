(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31c55f3a"],{"120c":function(e,t,n){"use strict";n("db7e")},"9ed6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{staticClass:"nav-bar",attrs:{title:"登录","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),n("van-form",{ref:"userFrom",on:{submit:e.goLogin}},[n("van-cell-group",[n("van-field",{attrs:{name:"mobileField",icon:"question-o",placeholder:"请输入手机号",type:"number",maxlength:"11",rules:e.userRules.mobile},scopedSlots:e._u([{key:"left-icon",fn:function(){return[n("i",{staticClass:"iconfont icon-shouji"})]},proxy:!0}]),model:{value:e.loginData.mobile,callback:function(t){e.$set(e.loginData,"mobile",t)},expression:" loginData.mobile"}}),n("van-field",{staticClass:"psw-filed",attrs:{placeholder:"获取验证码",border:!1,type:"number",maxlength:"6",rules:e.userRules.code},scopedSlots:e._u([{key:"left-icon",fn:function(){return[n("i",{staticClass:"iconfont icon-yanzhengma"})]},proxy:!0},{key:"button",fn:function(){return[n("div",{staticClass:"line"}),e.isEnableSend?n("van-button",{staticClass:"get-valid",attrs:{size:"small",round:"",type:"primary","native-type":"button"},on:{click:e.getCode}},[e._v(" 获取验证码 ")]):n("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(t){e.isEnableSend=!0}}})]},proxy:!0}]),model:{value:e.loginData.code,callback:function(t){e.$set(e.loginData,"code",t)},expression:"loginData.code"}})],1),n("div",{staticClass:"btn-wrap"},[n("van-button",{attrs:{type:"primary",block:"","native-type":"submit"}},[e._v("登录")])],1)],1)],1)},s=[],o=n("c7eb"),i=n("1da1"),r=n("b775"),c=function(e){return Object(r["a"])({method:"post",url:"/v1_0/authorizations",data:e})},l=function(e){return Object(r["a"])({method:"get",url:"/v1_0/sms/codes/"+e})},u={name:"login",components:{},props:[],data:function(){return{isEnableSend:!0,loginData:{mobile:17692455655,code:246810},userRules:{mobile:[{required:!0,message:"请填写手机号"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号码格式"}],code:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"请输入正确的验证码码格式"}]}}},methods:{goLogin:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var n,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.prev=1,t.next=4,c(e.loginData);case 4:n=t.sent,a=n.data,e.$toast.success("登录成功"),e.$store.commit("setUserToken",a.data),setTimeout((function(){e.$router.push("/my")}),1e3),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),400===t.t0.response.status?e.$toast.fail("手机号或验证码错误"):e.$toast.fail("登录错误，请稍后再试");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},getCode:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.userFrom.validate("mobileField");case 3:return e.isEnableSend=!1,e.$toast.loading({message:"发送中...",forbidClick:!0,duration:0}),t.prev=5,t.next=8,l(e.loginData.mobile);case 8:e.$toast.success("发送成功"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](5),e.isEnableSend=!0,404===t.t0.response.status?e.$toast.fail("手机号不正确"):429===t.t0.response.status?e.$toast.fail("请等待一段时后发送"):e.$toast.fail("未知错误");case 15:t.next=19;break;case 17:t.prev=17,t.t1=t["catch"](0);case 19:case"end":return t.stop()}}),t,null,[[0,17],[5,11]])})))()}},computed:{},watch:{},created:function(){},mounted:function(){}},d=u,f=(n("120c"),n("2877")),b=Object(f["a"])(d,a,s,!1,null,"cfde1436",null);t["default"]=b.exports},db7e:function(e,t,n){}}]);
//# sourceMappingURL=chunk-31c55f3a.52b9dc09.js.map